FROM eclipse-temurin:17-jdk-alpine AS build

# copy maven configs
COPY pom.xml mvnw ./
COPY .mvn .mvn

# copy source code
COPY validator-api validator-api
COPY server server
RUN ./mvnw clean package

FROM quay.io/wildfly/wildfly:latest-jdk17
WORKDIR server
COPY --from=build ./server/target/server-1.0.war /opt/jboss/wildfly/standalone/deployments/ROOT.war